apiVersion: apps.example.com/v1alpha1
kind: CIRunnerPool
metadata:
  name: jeff-runner-pool
spec:
  # The GitHub username of the developer who owns this local Kind cluster.
  # The runner registers with this as a label so workflows can route to it
  # using: runs-on: [self-hosted, jeff-vincent]
  githubUsername: "jeff-vincent"

  # The repository this runner polls for CI jobs
  repository: "jeff-vincent/demo-kindling"

  # Reference to a Secret containing a GitHub PAT with `repo` scope (key: "github-token").
  # At startup the runner automatically exchanges the PAT for a short-lived
  # registration token via the GitHub API — no manual token juggling required.
  tokenSecretRef:
    name: github-runner-token
    key: github-token

  # Single runner — one dev, one local Kind cluster
  replicas: 1

  # Runner image (defaults to the official GitHub Actions runner)
  runnerImage: "ghcr.io/actions/actions-runner:latest"

  # Extra labels (username is always added automatically)
  labels:
    - linux

  # Uncomment for GitHub Enterprise Server:
  # githubURL: "https://github.example.com"

---
# The Secret containing your GitHub PAT — replace the value.
# The operator exchanges this PAT for a short-lived registration token
# at runner startup, and a removal token at shutdown.
apiVersion: v1
kind: Secret
metadata:
  name: github-runner-token
type: Opaque
stringData:
  github-token: "ghp_your_github_pat_here"


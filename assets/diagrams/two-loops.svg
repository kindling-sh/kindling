<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 660">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#666"/>
    </marker>
    <marker id="arrow-light" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#999"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="820" height="660" rx="8" fill="#fafafa"/>

  <!-- ═══════ OUTER LOOP ═══════ -->
  <rect x="10" y="10" width="800" height="600" rx="14" fill="none" stroke="#FF6B35" stroke-width="3"/>
  <text x="410" y="40" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="18" font-weight="700" fill="#FF6B35">OUTER LOOP — CI</text>

  <!-- Row 1: git push → GitHub Actions → Self-hosted Runner -->

  <!-- git push -->
  <rect x="40" y="65" width="120" height="50" rx="10" fill="#e1d5e7" stroke="#9673a6" stroke-width="2"/>
  <text x="100" y="95" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#333">git push</text>

  <!-- Arrow → -->
  <line x1="160" y1="90" x2="225" y2="90" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- GitHub Actions -->
  <rect x="230" y="65" width="160" height="50" rx="10" fill="#d5e8d4" stroke="#82b366" stroke-width="2"/>
  <text x="310" y="95" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#333">GitHub Actions</text>

  <!-- Arrow → -->
  <line x1="390" y1="90" x2="455" y2="90" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Self-hosted Runner -->
  <rect x="460" y="60" width="210" height="60" rx="10" fill="#d5e8d4" stroke="#82b366" stroke-width="2"/>
  <text x="565" y="86" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#333">Self-hosted Runner</text>
  <text x="565" y="106" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="11" fill="#666" font-style="italic">on your laptop</text>

  <!-- Arrow ↓ from Runner down to Kaniko spine -->
  <path d="M 565,120 L 565,148 L 415,148 L 415,170" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Row 2: Kaniko build → registry:5000 -->

  <!-- Kaniko build -->
  <rect x="340" y="175" width="150" height="50" rx="10" fill="#fff2cc" stroke="#d6b656" stroke-width="2"/>
  <text x="415" y="205" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#333">Kaniko build</text>

  <!-- Arrow → -->
  <line x1="490" y1="200" x2="555" y2="200" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- registry:5000 -->
  <rect x="560" y="175" width="150" height="50" rx="10" fill="#fff2cc" stroke="#d6b656" stroke-width="2"/>
  <text x="635" y="205" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#333">registry:5000</text>

  <!-- Arrow ↓ from build row to Operator -->
  <path d="M 635,225 L 635,253 L 430,253 L 430,272" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Row 3: Operator deploys staging env -->

  <!-- Operator deploys -->
  <rect x="260" y="277" width="340" height="60" rx="10" fill="#dae8fc" stroke="#6c8ebf" stroke-width="2"/>
  <text x="430" y="302" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="14" fill="#333">Operator deploys staging env</text>
  <text x="430" y="322" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="11" fill="#666" font-style="italic">Deployment + Service + Ingress + Dependencies</text>

  <!-- Arrow ↓ to inner loop -->
  <line x1="340" y1="337" x2="340" y2="373" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- ═══════ INNER LOOP ═══════ -->
  <rect x="120" y="378" width="440" height="205" rx="12" fill="none" stroke="#9673a6" stroke-width="2" stroke-dasharray="8,4"/>
  <text x="340" y="402" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="16" font-weight="700" fill="#9673a6">INNER LOOP — Dev</text>

  <!-- edit file -->
  <rect x="148" y="420" width="110" height="45" rx="10" fill="#e1d5e7" stroke="#9673a6" stroke-width="2"/>
  <text x="203" y="448" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="13" fill="#333">edit file</text>

  <!-- Arrow → -->
  <line x1="258" y1="442" x2="302" y2="442" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- kindling sync -->
  <rect x="307" y="420" width="140" height="45" rx="10" fill="#e1d5e7" stroke="#9673a6" stroke-width="2"/>
  <text x="377" y="448" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="13" fill="#333">kindling sync</text>

  <!-- Arrow ↓ -->
  <line x1="340" y1="465" x2="340" y2="495" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- auto-detected restart -->
  <rect x="230" y="500" width="220" height="45" rx="10" fill="#e1d5e7" stroke="#9673a6" stroke-width="2"/>
  <text x="340" y="519" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="13" fill="#333">auto-detected restart</text>
  <text x="340" y="536" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="11" fill="#666" font-style="italic">signal / wrapper / build</text>

  <!-- Arrow ↓ -->
  <line x1="340" y1="545" x2="340" y2="563" stroke="#999" stroke-width="1" marker-end="url(#arrow-light)"/>

  <!-- see changes text -->
  <text x="340" y="576" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="12" fill="#666">see changes instantly · <tspan font-style="italic">stop sync → auto rollback</tspan></text>

  <!-- Footer tagline -->
  <text x="410" y="642" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="13" fill="#666" font-style="italic">Zero cloud CI minutes · Sub-second iteration · Full Kubernetes fidelity</text>
</svg>
